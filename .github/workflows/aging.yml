name: Auto Aging

on:
  schedule:
    - cron: "00 06 08 01 *"
  workflow_dispatch:

jobs:
  update-age:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v4

      - name: Calculate Age and Update
        run: |
          BIRTH_YEAR=2005
          CURRENT_YEAR=$(date +'%Y')
          AGE=$((CURRENT_YEAR - BIRTH_YEAR))

          echo "NEW_AGE=$AGE" >> $GITHUB_ENV

          sed -i "s/[0-9]\+/$AGE/" README.md
      - name: Commit and Push
        uses: stefanzweifel/git-auto-commit-action@v5
        with:

          commit_message: "chore: happy birthday! age updated to ${{ env.NEW_AGE }} ðŸŽ‰"
